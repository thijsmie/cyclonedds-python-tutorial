(tool-idlc)=
# idlc

While not a Python tool but a core Cyclone DDS one it is still a core part of developing DDS applications with Python. As soon as you have installed the Cyclone DDS Python package the `idlc -l py` mode will be available to turn your `.idl` files into Python modules.

## Usage

Simply type `idlc -l py file.idl` and your Python modules will be written to the working directory. The modules are outputted as if they are root python packages, e.g. the IDL type `MyModule::MyStruct` would be outputted as a Python package `MyModule` containing `MyStruct` and thus would need to be imported as `from MyModule import MyStruct`. If you wish to nest the modules somewhere in your own package you can specify a Python root prefix, see the `idlc` help:

```console
$ idlc -l py -h
Usage: idlc [OPTIONS] FILE
Options:
  -D <macro>[=value]     Define <macro> to <value> (default:1).
  -E                     Preprocess only.
  -f case-sensitive      Switch to case-sensitive mode of operation. e.g. to
                         allow constructed entities to contain fields that
                         differ only in case.
  -f keylist             Force use of #pragma keylist directive even if
                         annotations occur in the translation unit.
  -h                     Display available options.
  -I <directory>         Add <directory> to include search list.
  -l <language>          Compile representation for <language>. (default:c).
  -p py-root-prefix=path.to.submodule
                         Prefix all idl modules with a python path as root
                         module. Handy if you want to include idl types as
                         submodule in your project.
  -S                     Compile only.
  -t                     Don't generate type information in the topic
                         descriptor
  -v                     Display version information.
```

Take as example the `MyModule::MyStruct` type. Say we have a Python package `PyPackage` and we want to nest all the IDL output under `PyPackage.idl`, we would run idlc as follows: `idlc -l py -p py-root-prefix=PyPackage.idl file.idl`. Now we could put the generated `MyModule` folder under `path/to/PyPackage/idl` and import our type as `from PyPackage.idl.MyModule import MyStruct`.

### Multiple idl files

Types generated by the `idlc` Python generator are written to `module/$NAME_OF_IDL_FILE.py` and thus if you have `A.idl` and `B.idl` you can run `idlc -l py A.idl` and then `idlc -l py B.idl` and the output will be consistent and usable. It does this by generating a `module/.idlpy_manifest` file that contains lists of types and submodules that were generated from `A.idl` and `B.idl`, from which a `__init__.py` can then be created that keeps track of all types and submodules from all separate `idlc` runs. This comes with a number of caveats:

 * If you used to run with say: `A.idl`, `B.idl` and `C.idl` and delete `C.idl`, it is good practice to delete previous output folders and re-run `idlc` with `A.idl` and `B.idl`, to make sure that types of the now deleted `C.idl` don't stick around in your output.
 * If you use the `-p py-root-prefix` option you should use the same prefix for all runs of `idlc` or prepare for some manual edits of the generated outputs.
